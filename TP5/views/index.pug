extends layout

block content

  w3-card-4
    w3-container
      header.w3-container.w3-center.w3-indigo
        h1 Add a Task
      br
      form.w3-container(method="POST" action="/tasks/registo")
        fieldset
          legend Task
          label ID
          input.w3-input.w3-round.w3-border(type="text" name="id")
          label Goal
          input.w3-input.w3-round.w3-border(type="text" name="what")
          br
          label Responsible
          select.w3-select.w3-border.w3-round(name="who")
            option(value="" disabled selected) Choose a User
            each user in ulist
              option.w3-center #{user.name}
          br
          br
          label Due Date
          input.w3-input.w3-round.w3-border(type="date" name="dueDate")
          input.w3-input.w3-round(type="hidden" name="done" value="0")
        br
        button.w3-button.w3-white.w3-border.w3-border-red.w3-round-large(type="reset") Reset 
        button.w3-button.w3-white.w3-border.w3-border-blue.w3-round-large.w3-right(type="submit") Regist Task
  if editP == undefined

  else 
    .w3-card-4
      .w3-container
        header.w3-container.w3-center.w3-indigo
          h1 Edit
      form.w3-container(action="/tasks/edit/"+editP.id method="POST")
        fieldset
            legend Task 
            label Goal 
            input.w3-input.w3-round(type="hidden" name="id" value=editP.id)
            input.w3-input.w3-round.w3-border(type="text" name="what" value=editP.what)
            br
            label Responsible
            select.w3-select.w3-border.w3-round(name="who" value=editP.who)
              option.w3-center(value=editP.who) Choose Person 
              each user in ulist
                option.w3-center #{user.name}
            br
            br
            label Due Date     
            input.w3-input.w3-round.w3-border(type="date" name="dueDate" value=editP.dueDate)
            label Is it Done?
            input.w3-input.w3-round(type="checkbox" name="done" value="1" checked)
            input.w3-input.w3-round(type="hidden" name="date" value=d)
            br
        button.w3-button.w3-white.w3-border.w3-border-red.w3-round-large(type="reset") Reset
        button.w3-button.w3-white.w3-border.w3-border-blue.w3-round-large.w3-right(type="submit") Regist Task
            
  .w3-row.w3-container
    .w3-col.s6.w3-white.w3-blue-grey
      header.w3-center.w3-blue-grey
        h1 TO DO
      table.w3-table-all
        tr
          th ID               
          th Goal
          th Responsible
          th Due Date 
          th Options                 
        each task in tlist 
          if(task.done == undefined || task.done == 0)
            tr 
              td #{task.id}
              td #{task.what}
              td #{task.who}
              td #{task.dueDate}
              td 
                |  [ #[a(href="/tasks/edit/"+task.id) Edit] ]
                |  [ #[a(href="/tasks/delete/"+task.id) Delete] ]

    
    .w3-col.s6.w3-white.w3-teal
      header.w3-center.w3-teal
        h1 DONE    
      table.w3-table-all
        tr
          th ID
          th Goal
          th Responsible 
          th Due Date 
          th Date of Completion 
          th Options 
        each task in tlist
          if task.done == 1
            tr
              td #{task.id}
              td #{task.what}
              td #{task.who}
              td #{task.dueDate}
              td #{task.date}
              td 
                |  [ #[a(href="/tasks/delete/"+task.id) Delete]]
  br
  .w3-card-4.w3-indigo
    footer.w3-container.w3-MidnightBlue
      h5 Generated by EngWeb2023 in #{d}